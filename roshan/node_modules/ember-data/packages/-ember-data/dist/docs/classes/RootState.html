<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>RootState - The ember-data API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The ember-data API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: v3.16.0-alpha.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/@ember-data.html">@ember-data</a></li>
                                <li><a href="../classes/@ember-data/model.html">@ember-data/model</a></li>
                                <li><a href="../classes/AbortError.html">AbortError</a></li>
                                <li><a href="../classes/Adapter.html">Adapter</a></li>
                                <li><a href="../classes/AdapterError.html">AdapterError</a></li>
                                <li><a href="../classes/AdapterPopulatedRecordArray.html">AdapterPopulatedRecordArray</a></li>
                                <li><a href="../classes/BelongsToReference.html">BelongsToReference</a></li>
                                <li><a href="../classes/BooleanTransform.html">BooleanTransform</a></li>
                                <li><a href="../classes/BuildURLMixin.html">BuildURLMixin</a></li>
                                <li><a href="../classes/ConflictError.html">ConflictError</a></li>
                                <li><a href="../classes/DateTransform.html">DateTransform</a></li>
                                <li><a href="../classes/EmbeddedRecordsMixin.html">EmbeddedRecordsMixin</a></li>
                                <li><a href="../classes/Ember.HTMLBars.helpers.html">Ember.HTMLBars.helpers</a></li>
                                <li><a href="../classes/Ember.Inflector.html">Ember.Inflector</a></li>
                                <li><a href="../classes/Errors.html">Errors</a></li>
                                <li><a href="../classes/ForbiddenError.html">ForbiddenError</a></li>
                                <li><a href="../classes/HasManyReference.html">HasManyReference</a></li>
                                <li><a href="../classes/IdentityMap.html">IdentityMap</a></li>
                                <li><a href="../classes/InspectorDataAdapter.html">InspectorDataAdapter</a></li>
                                <li><a href="../classes/InternalModelMap.html">InternalModelMap</a></li>
                                <li><a href="../classes/InvalidError.html">InvalidError</a></li>
                                <li><a href="../classes/JSONAPIAdapter.html">JSONAPIAdapter</a></li>
                                <li><a href="../classes/JSONAPISerializer.html">JSONAPISerializer</a></li>
                                <li><a href="../classes/JSONSerializer.html">JSONSerializer</a></li>
                                <li><a href="../classes/ManyArray.html">ManyArray</a></li>
                                <li><a href="../classes/MinimumSerializerInterface.html">MinimumSerializerInterface</a></li>
                                <li><a href="../classes/Model.html">Model</a></li>
                                <li><a href="../classes/NotFoundError.html">NotFoundError</a></li>
                                <li><a href="../classes/NumberTransform.html">NumberTransform</a></li>
                                <li><a href="../classes/RecordArray.html">RecordArray</a></li>
                                <li><a href="../classes/RecordArrayManager.html">RecordArrayManager</a></li>
                                <li><a href="../classes/RecordReference.html">RecordReference</a></li>
                                <li><a href="../classes/Reference.html">Reference</a></li>
                                <li><a href="../classes/RESTAdapter.html">RESTAdapter</a></li>
                                <li><a href="../classes/RESTSerializer.html">RESTSerializer</a></li>
                                <li><a href="../classes/RootState.html">RootState</a></li>
                                <li><a href="../classes/Serializer.html">Serializer</a></li>
                                <li><a href="../classes/ServerError.html">ServerError</a></li>
                                <li><a href="../classes/Snapshot.html">Snapshot</a></li>
                                <li><a href="../classes/SnapshotRecordArray.html">SnapshotRecordArray</a></li>
                                <li><a href="../classes/Store.html">Store</a></li>
                                <li><a href="../classes/String.html">String</a></li>
                                <li><a href="../classes/StringTransform.html">StringTransform</a></li>
                                <li><a href="../classes/TimeoutError.html">TimeoutError</a></li>
                                <li><a href="../classes/Transform.html">Transform</a></li>
                                <li><a href="../classes/UnauthorizedError.html">UnauthorizedError</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/@ember-data.html">@ember-data</a></li>
                                <li><a href="../modules/@ember-data_adapter.html">@ember-data/adapter</a></li>
                                <li><a href="../modules/@ember-data_debug.html">@ember-data/debug</a></li>
                                <li><a href="../modules/@ember-data_model.html">@ember-data/model</a></li>
                                <li><a href="../modules/@ember-data_record-data.html">@ember-data/record-data</a></li>
                                <li><a href="../modules/@ember-data_serializer.html">@ember-data/serializer</a></li>
                                <li><a href="../modules/@ember-data_store.html">@ember-data/store</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>RootState Class</h1>
<div class="box meta">


        <div class="foundat">
            Defined in: <a href="../files/.._store_addon_-private_system_model_states.js.html#l10"><code>..&#x2F;store&#x2F;addon&#x2F;-private&#x2F;system&#x2F;model&#x2F;states.js:10</code></a>
        </div>

            Module: <a href="../modules/@ember-data_store.html">@ember-data/store</a>

</div>


<div class="box intro">
    <h3>State</h3>
<p>Each record has a <code>currentState</code> property that explicitly tracks what
state a record is in at any given time. For instance, if a record is
newly created and has not yet been sent to the adapter to be saved,
it would be in the <code>root.loaded.created.uncommitted</code> state.  If a
record has had local modifications made to it that are in the
process of being saved, the record would be in the
<code>root.loaded.updated.inFlight</code> state. (This state path will be
explained in more detail below.)</p>
<p>Events are sent by the record or its store to the record's
<code>currentState</code> property. How the state reacts to these events is
dependent on which state it is in. In some states, certain events
will be invalid and will cause an exception to be raised.</p>
<p>States are hierarchical and every state is a sub-state of the
<code>RootState</code>. For example, a record can be in the
<code>root.deleted.uncommitted</code> state then transitions into the
<code>root.deleted.inFlight</code> state. If a child state does not implement
an event handler, the state manager will attempt to invoke the event
on all parent states until the root state is reached. The state
hierarchy of a record is described in terms of a path string. You
can determine a record's current state by getting the state's
<code>stateName</code> property:</p>
<pre class="code prettyprint"><code class="language-javascript">record.get('currentState.stateName');
//=&gt; &quot;root.created.uncommitted&quot;
</code></pre>
<p>The hierarchy of valid states that ship with ember data looks like
this:</p>
<pre class="code prettyprint"><code class="language-text">* root
  * deleted
    * saved
    * uncommitted
    * inFlight
  * empty
  * loaded
    * created
      * uncommitted
      * inFlight
    * saved
    * updated
      * uncommitted
      * inFlight
  * loading
</code></pre>
<p>The <code>Model</code> states are themselves stateless. What that means is
that, the hierarchical states that each of <em>those</em> points to is a
shared data structure. For performance reasons, instead of each
record getting its own copy of the hierarchy of states, each record
points to this global, immutable shared instance. How does a state
know which record it should be acting on? We pass the record
instance into the state's event handlers as the first argument.</p>
<p>The record passed as the first parameter is where you should stash
state about the record if needed; you should never store data on the state
object itself.</p>
<h3>Events and Flags</h3>
<p>A state may implement zero or more events and flags.</p>
<h4>Events</h4>
<p>Events are named functions that are invoked when sent to a record. The
record will first look for a method with the given name on the
current state. If no method is found, it will search the current
state's parent, and then its grandparent, and so on until reaching
the top of the hierarchy. If the root is reached without an event
handler being found, an exception will be raised. This can be very
helpful when debugging new features.</p>
<p>Here's an example implementation of a state with a <code>myEvent</code> event handler:</p>
<pre class="code prettyprint"><code class="language-javascript">aState: State.create({
  myEvent: function(manager, param) {
    console.log(&quot;Received myEvent with&quot;, param);
  }
})
</code></pre>
<p>To trigger this event:</p>
<pre class="code prettyprint"><code class="language-javascript">record.send('myEvent', 'foo');
//=&gt; &quot;Received myEvent with foo&quot;
</code></pre>
<p>Note that an optional parameter can be sent to a record's <code>send()</code> method,
which will be passed as the second parameter to the event handler.</p>
<p>Events should transition to a different state if appropriate. This can be
done by calling the record's <code>transitionTo()</code> method with a path to the
desired state. The state manager will attempt to resolve the state path
relative to the current state. If no state is found at that path, it will
attempt to resolve it relative to the current state's parent, and then its
parent, and so on until the root is reached. For example, imagine a hierarchy
like this:</p>
<pre class="code prettyprint"><code>* created
  * uncommitted &lt;-- currentState
  * inFlight
* updated
  * inFlight
</code></pre>
<p>If we are currently in the <code>uncommitted</code> state, calling
<code>transitionTo('inFlight')</code> would transition to the <code>created.inFlight</code> state,
while calling <code>transitionTo('updated.inFlight')</code> would transition to
the <code>updated.inFlight</code> state.</p>
<p>Remember that <em>only events</em> should ever cause a state transition. You should
never call <code>transitionTo()</code> from outside a state's event handler. If you are
tempted to do so, create a new event and send that to the state manager.</p>
<h4>Flags</h4>
<p>Flags are Boolean values that can be used to introspect a record's current
state in a more user-friendly way than examining its state path. For example,
instead of doing this:</p>
<pre class="code prettyprint"><code class="language-javascript">var statePath = record.get('stateManager.currentPath');
if (statePath === 'created.inFlight') {
  doSomething();
}
</code></pre>
<p>You can say:</p>
<pre class="code prettyprint"><code class="language-javascript">if (record.get('isNew') &amp;&amp; record.get('isSaving')) {
  doSomething();
}
</code></pre>
<p>If your state does not set a value for a given flag, the value will
be inherited from its parent (or the first place in the state hierarchy
where it is defined).</p>
<p>The current set of flags are defined below. If you want to add a new flag,
in addition to the area below, you will also need to declare it in the
<code>Model</code> class.</p>
<ul>
<li><a href="Model/properties/isEmpty?anchor=isEmpty">isEmpty</a></li>
<li><a href="Model/properties/isLoading?anchor=isLoading">isLoading</a></li>
<li><a href="Model/properties/isLoaded?anchor=isLoaded">isLoaded</a></li>
<li><a href="Model/properties/hasDirtyAttributes?anchor=hasDirtyAttributes">hasDirtyAttributes</a></li>
<li><a href="Model/properties/isSaving?anchor=isSaving">isSaving</a></li>
<li><a href="Model/properties/isDeleted?anchor=isDeleted">isDeleted</a></li>
<li><a href="Model/properties/isNew?anchor=isNew">isNew</a></li>
<li><a href="Model/properties/isValid?anchor=isValid">isValid</a></li>
</ul>

</div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>




        </div>




    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
